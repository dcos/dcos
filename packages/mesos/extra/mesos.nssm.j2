[service]
Description = Mesos Agent: distributed systems kernel agent
DisplayName = mesos-agent
Name = mesos-agent
Application = powershell.exe
AppDirectory = {{ dcos_inst_dpath }}\bin
AppParameters =
{#-#} -ExecutionPolicy Bypass -NoProfile -File {{ dcos_inst_dpath }}\bin\start_mesos.ps1
{#-#} --prescript1 {{ dcos_inst_dpath }}\bin\fault-domain-detect-win.ps1
{#-#} --precommand1 {{ dcos_inst_dpath }}\etc\mesos\domain.json
{#-#} --prescript2 {{ dcos_inst_dpath }}\bin\bootstrap.ps1
{#-#} --precommand2 dcos-mesos-slave
{#-#} --application {{ dcos_inst_dpath }}\bin\mesos-agent.exe
{#-#} --master zk://{{ zk_address }}/mesos
{#-#} --launcher_dir {{ dcos_inst_dpath }}\bin
{#-#} --appc_store_dir {{ pkg_rtd_dpath }}\images
{#-#} --work_dir {{ pkg_work_dpath }}
{#-#} --runtime_dir {{ pkg_rtd_dpath }}
{#-#} --isolation windows/cpu,windows/mem,filesystem/windows
{#-#} --containerizers mesos,docker
{#-#} --modules_dir {{ dcos_cfg_dpath }}\mesos\modules
{#-#} --attributes os:windows
{#-#} --ip {{ local_priv_ipaddr }}
{#-#} --hostname {{ local_priv_ipaddr }}
{#-#} --resources ports:[10000-34000]
{#-#} --executor_registration_timeout 10mins
{#-#} --fetcher_stall_timeout 10mins
AppStdout = {{ pkg_log_dpath }}\mesos-agent.log
AppStderr = {{ pkg_log_dpath }}\mesos-agent.log
DependOnService = docker
AppRotateFiles = 1
AppRotateSeconds = 86400
AppRotateBytes = 1048576
