#!/bin/bash
source /opt/mesosphere/environment.export
export LIB_INSTALL_DIR="$PKG_PATH/lib/python3.6/site-packages"
mkdir -p "$LIB_INSTALL_DIR"

# Install wheels.
for package in adal analytics-python azure-nspkg azure-common azure-mgmt-nspkg \
    azure-mgmt-network azure-storage beautifulsoup4 docutils keyring google-api-core \
    msrest msrestazure opencensus opencensus-ext-requests opencensus-ext-zipkin \
    opencensus-context requests-oauthlib schema webob wheel protobuf; do
  pip3 install --no-deps --no-index --prefix=$PKG_PATH /pkg/src/$package/*.whl
done

for package in aiohttp checksumdir coloredlogs humanfriendly multidict \
    oauthlib waitress websocket-client wrapt googleapis-common-protos; do
  pip3 install --no-deps --install-option="--prefix=$PKG_PATH" --root=/ /pkg/src/$package
done
